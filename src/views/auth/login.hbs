<div class="fw-bolder fs-3 text-center">Login into Patch</div>
<form action="#" id="login-form" method="post">
    <label for="username"></label>
    <input type="text" name="username" id="username" placeholder="Email or Username" class="form-control">
    <label for="password"></label>
    <input type="password" name="password" id="password" placeholder="Password" class="form-control">
    <hr>
    <div class="submit-button text-center pb-4">
        <button type="submit" class="btn btn-dark">Login</button>
    </div>
    <div class="text-center link">
        <a href="/forgot-password" class="forgot-password text-center text-dark text-muted">Forgot your password?</a>
        |
        <a href="/register" class="text-center text-dark text-muted">Create an account</a>
    </div>
</form>


<!-- Error Modal -->
<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="errorModalLabel">Login Error</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {{#if messages.error}}
          {{messages.error}}
        {{else}}
          An error occurred during login. Please try again.
        {{/if}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<style>
  .modal-backdrop {
    z-index: -1;
  }
  .modal {
      z-index: 200;
  }

  #username, #password {
    z-index: -5; 
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var errorModal = new bootstrap.Modal(document.getElementById('errorModal'), {
        backdrop: 'static',
        keyboard: false
    });

    {{#if messages.error}}
        errorModal.show();
    {{/if}}

    // Add event listeners to close the modal
    document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(function(element) {
        element.addEventListener('click', function() {
            errorModal.hide();
        });
    });

    // Allow clicking outside the modal to close it
    document.getElementById('errorModal').addEventListener('click', function(event) {
        if (event.target === this) {
            errorModal.hide();
        }
    });
});
</script>